<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebRTMP-Demo</title>
  <script type="text/javascript" src="dist/webrtmp.js"></script>
  <style>
    #output {
        background-color: black;
    }

    body {
        background-color: dimgray;
        font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
<h1>WebRTMP-Demo</h1><br>
<table>
  <tr>
    <td colspan="2">
      <label for="host">Server:</label> <input type="text" id="host" value="bunkertv.org"> <label for="port">Port:</label> <input id="port" type="text" value="9001"><br>
      <label for="appName">Application:</label> <input type="text" id="appName" value="bunkertv"> <label for="streamName">Streamname:</label> <input type="text" id="streamName" value="fab5bc692e71e17fba34e92d47e64fd0"><br>
      <input style="float:right;" id="StartButton" type="button" value="Play Video" onclick="playVideo()"><br>
    </td>
  </tr>
  <tr>
    <td>
      <video controls id="output" width="640" height="360"></video>
    </td>
    <td>
      <iframe src="https://uhr.ptb.de/" style="width: 360px; height: 360px;border: none; background-color: black;"></iframe>
    </td>
  </tr>
</table>
<br>
<input type="button" value="pause" onclick="webrtmp.pause(true)"><br>

<script>
  Log.LEVEL = Log.INFO;

  const output = document.getElementById("output");

  webrtmp.attachMediaElement(output);

  function playVideo(){
    webrtmp.open(document.getElementById("host").value, document.getElementById("port").value).then(()=>{
      webrtmp.connect(document.getElementById("appName").value).then(()=>{
        webrtmp.play(document.getElementById("streamName").value).then(()=>{
          console.log("playing");
        }).catch((error)=>{
          console.error(error);
        })
      }).catch((error)=>{
        console.error(error);
      })
    }).catch((error)=>{
      console.error(error);
    })
  }

  playVideo();
</script>
</body>
</html>
